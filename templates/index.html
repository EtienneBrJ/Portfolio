{% extends 'layout.html' %}

{% block content %}

<div class="dataContent m-5 d-flex">

  <div class="container half ">
    <a class="nav-link" aria-current="page" href="/blocks" onclick="loading();">/blocks</a>
    <div class="shadow-4 rounded-6 overflow-hidden">
      <table class="table">
        <thead class="text-center">
          <th>
            <p title="Lenght of the blockchain" class="m-1">Block Height</p>
          </th>
          <th>
            <p title="Transactions in this block" class="m-1">Transactions</p>
          </th>
          <th>
            <p title="Miner who successfully include the block onto the blockchain" class="m-1">Miner</p>
          </th>
          <th>
            <p title="This represents the part of the tx fee that is burnt: baseFeePerGas * gasUsed" class="m-1"><i
                style="color: rgb(218, 70, 70);" class="fas fa-fire-alt "></i> Burnt Fees</p>
          </th>
        </thead>
        {% for i in range(last_blocks| length) %}
        <tbody class="text-center">
          <td>
            <div class="d-flex flex-column align-items-center">
              <a class="mb-0" href={{ url_for('block', block_number=last_blocks[i].number) }}>{{
                last_blocks[i].number
                }}</a>
              <p class="small text-muted mb-0">{{ last_blocks[i].timestamp | since }}</p>
            </div>
          </td>
          <td>
            <div class="pt-10px">
              <p>{{ last_blocks[i].transactions | length }}</p>
            </div>
          </td>
          <td>
            <div class="pt-10px">
              <a href={{ url_for('address', hexa_address=last_blocks[i].miner) }}>{% if last_blocks[i].miner.lower() in
                miners %}
                {{ miners[last_blocks[i].miner.lower()] }}
                {% else %}
                {{ last_blocks[i].miner.lower() | cutter }}
                {% endif %}
              </a>
            </div>
          </td>
          <td>
            <p class="pt-10px">{{ last_blocks[i].gasUsed | burntFees(last_blocks[i].baseFeePerGas) }} Ether</p>
          </td>
        </tbody>
        {% endfor %}
      </table>
    </div>
  </div>

  <div class="container half">
    <a class="nav-link" aria-current="page" href="/transactions" onclick="loading();">/transactions</a>
    <div class="shadow-4 rounded-6 overflow-hidden">
      <table class="table">
        <thead class="text-center">
          <th>
            <p title="A TxHash or transaction hash is a unique 66 characters identifier that is generated whenever a transaction is executed"
              class="m-1">Txn hash</p>
          </th>
          <th>
            <p title="The sending party of the transaction" class="m-1">From</p>
          </th>
          <th>
            <p title="The receiving party of the transaction" class="m-1">To</p>
          </th>
          <th>
            <p title="The value being transacted in Ether" class="m-1">Value <i class="fab fa-ethereum"></i></p>
          </th>
        </thead>
        {% for i in range(last_txn| length) %}
        <tbody class="text-center">
          <td>
            <div class="d-flex flex-column align-items-center">
              <a class="mb-0 rem08" href={{ url_for('transaction', hash=last_txn[i].hash | fromHex) }}>{{
                last_txn[i].hash |
                fromHex | cutter }}</a>
              <p class="small text-muted mb-0">{{ last_blocks[0].timestamp | since }}</p>
            </div>
          </td>
          <td title={{ last_txn[i].hash | fromHex }}>
            <div class="pt-10px">
              <a href={{ url_for('address', hexa_address=last_txn[i].from) }}>{{ last_txn[i].from | cutter}}</a>
            </div>
          </td>
          <td title={{ last_txn[i].hash | fromHex }}>
            <div class="pt-10px">
              <a href={{ url_for('address', hexa_address=last_txn[i].from) }}>{{ last_txn[i].to | cutter}}</a>
            </div>
          </td>
          <td>
            <div class="pt-10px">
              <p>{{ last_txn[i].value | fromWei}} Ether</p>
            </div>
          </td>
        </tbody>
        {% endfor %}
      </table>
    </div>
  </div>

</div>
{% endblock %}